<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header bg-success text-white">
          <h2 class="mb-0">üí∞ Opportunit√© d'√©conomie</h2>
        </div>

        <div class="card-body">
          <div class="row mb-4">
            <div class="col-md-6">
              <h5>Votre d√©pense</h5>

              <p class="lead">
                <strong>
                  <%= number_to_currency(@opportunity.statement.amount, unit: "‚Ç¨") %>
                </strong>
              </p>

              <p class="text-muted">
                <%= @opportunity.statement.category.name %>
                <br>
                <%= l(@opportunity.statement.date, format: :long) %>
              </p>
            </div>

            <div class="col-md-6">
              <h5>Moyenne du march√©</h5>

              <p class="lead">
                <strong>
                  <%= number_to_currency(@opportunity.standard.average_amount, unit: "‚Ç¨") %>
                </strong>
              </p>

              <p class="text-muted"><%= @opportunity.standard.unit %></p>
            </div>
          </div>

          <div class="alert alert-success">
            <h4 class="alert-heading">√âconomies potentielles</h4>

            <p class="display-4">
              <strong>
                <%= number_to_currency(@opportunity.savings, unit: "‚Ç¨") %>
              </strong>
            </p>

            <p class="mb-0">
              En passant √† un fournisseur au prix moyen du march√©
            </p>
          </div>

          <div class="mt-4">
            <h5>Statut de l'opportunit√©</h5>

            <p>
              <span
                class="
                  badge bg-<%= case @opportunity.status
                  when 'pending' then 'warning'
                  when 'contacted' then 'info'
                  when 'completed' then 'success'
                  end %>
                "
              >
                <%= @opportunity.status.humanize %>
              </span>
            </p>

            <%= form_with(model: @opportunity, method: :patch, local: true, class: "d-inline-block") do |f| %>
              <div class="btn-group" role="group">
                <%= f.button "Marquer comme contact√©",
                    name: "opportunity[status]",
                    value: "contacted",
                    class: "btn btn-info btn-sm",
                    disabled: @opportunity.contacted? || @opportunity.completed? %>

                <%= f.button "Marquer comme compl√©t√©",
                    name: "opportunity[status]",
                    value: "completed",
                    class: "btn btn-success btn-sm",
                    disabled: @opportunity.completed? %>
              </div>
            <% end %>
          </div>

          <div class="mt-4">
            <%= link_to "‚Üê Retour au relev√©", @opportunity.statement, class: "btn btn-outline-secondary" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
